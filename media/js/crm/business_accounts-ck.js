function Business_Accounts(){}Business_Accounts.prototype={table_ajax_request:null,$loader:null,$tbody:null,$pagination:null,$first_paging_button:null,$current_paging_button:null,search_term:"",selected_plan:"",selected_status:"",selected_account_manager_id:"",delete_id:0,_init:function(){$.uniform.restore("select");this.binds()},binds:function(){var e=this;e.$loader=$("#table_loader");e.$tbody=$("#tbody");e.$pagination=$("#pagination_container");e.$current_paging_button=$(".dataTables_paginate a:eq(0)");e.$first_paging_button=e.$current_paging_button;$("#delete_dialog").dialog({autoOpen:!1,width:500,height:260,modal:!0,buttons:{Delete:function(){var t=$("#delete_dialog").next(".ui-dialog-buttonpane").children(".ui-dialog-buttonset").children('button:contains("Delete")');t.attr("disabled",!0).addClass("ui-state-disabled").children(".ui-button-text").html("Deleting...");$sb.ajax.post("/ajax_delete_business_account",{id:e.delete_id,why:$("#delete_why").val(),cancel_stripe:$("#cancel_stripe").is(":checked")?1:0},function(t){e.refresh_table(e.$current_paging_button);$("#delete_dialog").dialog("close")})},Close:function(){$(this).dialog("close")}}});$(".page_button").live("click",function(t){e.$current_paging_button=$(this);t.preventDefault();e.refresh_table($(this))});$("#search_term").keyup(function(t){e.search_term=t.target.value;e.refresh_table(e.$first_paging_button)});$("#plan").change(function(t){e.selected_plan=t.target.value;e.refresh_table(e.$first_paging_button)});$("#status").change(function(t){e.selected_status=t.target.value;e.refresh_table(e.$first_paging_button)});$("#account_manager").change(function(t){e.selected_account_manager_id=t.target.value;e.refresh_table(e.$first_paging_button)});$(".delete").live("click",function(t){e.delete_id=$(this).attr("data-id");$("#delete_dialog").dialog("open")});e.refresh_table(e.$current_paging_button)},refresh_table:function(e){var t=this;if($sb.empty(e))return!1;var n=e.attr("data-page_number");n||(n="1");if(!$sb.empty(n)){t.table_ajax_request!=null&&t.table_ajax_request.abort();t.show_loader();t.table_ajax_request=$.getJSON("/business_accounts/"+n,{search_term:t.search_term,plan:t.selected_plan,status:t.selected_status,account_manager_id:t.selected_account_manager_id},function(e){t.table_ajax_request=null;if(e.html.data.num_business_accounts>0){typeof e.html.results!="undefined"&&t.$tbody.html(e.html.results);typeof e.html.pagination!="undefined"&&t.$pagination.html(e.html.pagination)}else t.$tbody.html('<tr><td colspan="7"><span id="no_results">No Business Accounts found.</span></td></tr>');t.hide_loader()})}},show_loader:function(){var e=this;e.$loader.show();e.$tbody.addClass("loading")},hide_loader:function(){var e=this;e.$tbody.removeClass("loading");e.$loader.hide()}};$sb.crm.Business_Accounts=new Business_Accounts;$(document).ready(function(){$sb.crm.Business_Accounts._init()});